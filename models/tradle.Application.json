{
  "type": "tradle.Model",
  "title": "Application",
  "id": "tradle.Application",
  "properties": {
    "applicantName": {
      "type": "string",
      "displayName": true,
      "readOnly": true
    },
    "applicant": {
      "type": "object",
      "ref": "tradle.Identity",
      "readOnly": true
    },
    "relationshipManagers": {
      "type": "array",
      "readOnly": true,
      "hidden": true,
      "items": {
        "ref": "tradle.Identity"
      }
    },
    "analyst": {
      "type": "object",
      "readOnly": true,
      "ref": "tradle.MyEmployeeOnboarding"
    },
    "reviewer": {
      "type": "object",
      "hidden": true,
      "readOnly": true,
      "ref": "tradle.Identity"
    },
    "status": {
      "type": "string",
      "readOnly": true
    },
    "dateStarted": {
      "type": "date",
      "readOnly": true
    },
    "dateCompleted": {
      "type": "date",
      "readOnly": true
    },
    "dateEvaluated": {
      "type": "date",
      "readOnly": true
    },
    "dateModified": {
      "type": "date",
      "readOnly": true
    },
    "context": {
      "type": "string",
      "readOnly": true
    },
    "request": {
      "type": "object",
      "ref": "tradle.Form",
      "readOnly": true
    },
    "requestFor": {
      "type": "string",
      "range": "model",
      "displayName": true,
      "readOnly": true
    },
    "submissions": {
      "type": "array",
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application"
      }
    },
    "assignedToTeam": {
      "type": "object",
      "ref": "tradle.ClientOnboardingTeam"
    },
    "forms": {
      "type": "array",
      "icon": "logo-buffer",
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application",
        "filter": {
          "SUBCLASS_OF": {
            "submission._t": ["tradle.Form"]
          }
        }
      }
    },
    "editRequests": {
      "type": "array",
      "icon": "ios-create-outline",
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application",
        "filter": {
          "EQ": {
            "submission._t": "tradle.FormError"
          }
        }
      }
    },
    "products": {
      "type": "array",
      "icon": "ios-color-filter-outline",
      "hidden": true,
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application",
        "filter": {
          "SUBCLASS_OF": {
            "submission._t": ["tradle.MyProduct"]
          }
        }
      }
    },
    "verifications": {
      "type": "array",
      "icon": "ios-ribbon-outline",
      "hidden": true,
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application",
        "filter": {
          "EQ": {
            "submission._t": "tradle.Verification"
          }
        }
      }
    },
    "checks": {
      "type": "array",
      "items": {
        "ref": "tradle.Check",
        "backlink": "application"
      }
    },
    "checksOverride": {
      "type": "array",
      "hidden": true,
      "items": {
        "ref": "tradle.CheckOverride",
        "backlink": "application"
      }
    },
    "requestErrors": {
      "type": "array",
      "icon": "ios-open-outline",
      "hidden": true,
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application",
        "filter": {
          "EQ": {
            "submission._t": "tradle.RequestError"
          }
        }
      }
    },
    "parent": {
      "type": "object",
      "title": "Parent application",
      "readOnly": true,
      "ref": "tradle.Application"
    },
    "top": {
      "type": "object",
      "title": "Root application",
      "readOnly": true,
      "ref": "tradle.Application"
    },
    "associatedResource": {
      "type": "object",
      "ref": "tradle.Form",
      "readOnly": true
    },
    "items": {
      "type": "array",
      "readOnly": true,
      "items": {
        "ref": "tradle.Application",
        "backlink": "parent"
      }
    },
    "certificate": {
      "type": "object",
      "ref": "tradle.MyProduct",
      "readOnly": true
    },
    "archived": {
      "type": "boolean",
      "readOnly": true
    },
    "draft": {
      "type": "boolean",
      "description": "true if this is a draft for another application"
    },
    "prefillFromApplication": {
      "type": "object",
      "ref": "tradle.Application",
      "readOnly": true
    },
    "numberOfChecksFailed": {
      "type": "number",
      "readOnly": true
    },
    "hasFailedChecks": {
      "type": "boolean",
      "readOnly": true
    },
    "numberOfCheckOverrides": {
      "type": "number",
      "readOnly": true
    },
    "hasCheckOverrides": {
      "type": "boolean",
      "readOnly": true
    },
    "hasFailedSanctionsChecks": {
      "type": "boolean",
      "readOnly": true
    },
    "hasFailedDocumentValidityChecks": {
      "type": "boolean",
      "readOnly": true
    },
    "hasFailedEntityExistanceChecks": {
      "type": "boolean",
      "readOnly": true
    },
    "lastMsgToClientTime": {
      "type": "date",
      "readOnly": true
    },
    "lastMsgFromClientTime": {
      "type": "date",
      "readOnly": true
    },
    "score": {
      "type": "number"
    }
  },
  "viewCols": [
    "status",
    "applicantName",
    "requestFor",
    "assignedToTeam",
    "dateStarted",
    "dateModified",
    "dateCompleted",
    "score",
    "hasFailedChecks",
    "numberOfChecksFailed",
    "hasFailedSanctionsChecks",
    "hasFailedDocumentValidityChecks",
    "hasFailedEntityExistanceChecks",
    "hasCheckOverrides",
    "numberOfCheckOverrides",
    "lastMsgFromClientTime",
    "lastMsgToClientTime",
    "archived",
    "forms",
    "checks",
    "editRequests",
    "parent",
    "analyst"
  ],
  "required": ["applicant", "requestFor", "context"],
  "indexes": [
    {
      "hashKey": "context",
      "specificity": 5
    },
    {
      "hashKey": "applicant._permalink",
      "rangeKey": "_time",
      "specificity": 4
    },
    {
      "hashKey": "_t",
      "rangeKey": "_time",
      "specificity": 1
    },
    {
      "hashKey": "status",
      "rangeKey": ["requestFor", "_time"],
      "specificity": 3
    },
    {
      "hashKey": "assignedToTeam.id",
      "rangeKey": "_time",
      "specificity": 4
    },
    {
      "hashKey": "analyst._permalink",
      "rangeKey": "_time",
      "specificity": 4
    }
  ]
}
