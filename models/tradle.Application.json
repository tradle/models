{
  "type": "tradle.Model",
  "title": "Application",
  "id": "tradle.Application",
  "properties": {
    "applicantName": {
      "type": "string",
      "readOnly": true
    },
    "applicant": {
      "type": "object",
      "ref": "tradle.Identity",
      "readOnly": true
    },
    "relationshipManagers": {
      "type": "array",
      "readOnly": true,
      "items": {
        "ref": "tradle.Identity"
      }
    },
    "status": {
      "type": "string",
      "readOnly": true
    },
    "dateStarted": {
      "type": "date",
      "readOnly": true
    },
    "dateCompleted": {
      "type": "date",
      "readOnly": true
    },
    "dateEvaluated": {
      "type": "date",
      "readOnly": true
    },
    "dateModified": {
      "type": "date",
      "readOnly": true
    },
    "context": {
      "type": "string",
      "readOnly": true
    },
    "request": {
      "type": "object",
      "ref": "tradle.Form",
      "readOnly": true
    },
    "requestFor": {
      "type": "string",
      "range": "model",
      "displayName": true,
      "readOnly": true
    },
    "submissions": {
      "type": "array",
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application"
      }
    },
    "assignedToTeam": {
      "type": "object",
      "ref": "tradle.ClientOnboardingTeam"
    },
    "forms": {
      "type": "array",
      "icon": "logo-buffer",
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application",
        "filter": {
          "SUBCLASS_OF": {
            "submission._t": ["tradle.Form"]
          }
        }
      }
    },
    "editRequests": {
      "type": "array",
      "icon": "ios-create-outline",
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application",
        "filter": {
          "EQ": {
            "submission._t": "tradle.FormError"
          }
        }
      }
    },
    "products": {
      "type": "array",
      "icon": "ios-color-filter-outline",
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application",
        "filter": {
          "SUBCLASS_OF": {
            "submission._t": ["tradle.MyProduct"]
          }
        }
      }
    },
    "verifications": {
      "type": "array",
      "icon": "ios-ribbon-outline",
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application",
        "filter": {
          "EQ": {
            "submission._t": "tradle.Verification"
          }
        }
      }
    },
    "checks": {
      "type": "array",
      "items": {
        "ref": "tradle.Check",
        "backlink": "application"
      }
    },
    "checksOverride": {
      "type": "array",
      "hidden": true,
      "items": {
        "ref": "tradle.CheckOverride",
        "backlink": "application"
      }
    },
    "requestErrors": {
      "type": "array",
      "icon": "ios-open-outline",
      "items": {
        "ref": "tradle.ApplicationSubmission",
        "backlink": "application",
        "filter": {
          "EQ": {
            "submission._t": "tradle.RequestError"
          }
        }
      }
    },
    "certificate": {
      "type": "object",
      "ref": "tradle.MyProduct",
      "readOnly": true
    },
    "archived": {
      "type": "boolean",
      "readOnly": true
    },
    "draft": {
      "type": "boolean",
      "description": "true if this is a draft for another application"
    },
    "prefillFromApplication": {
      "type": "object",
      "ref": "tradle.Application",
      "readOnly": true
    },
    "numberOfChecksFailed": {
      "type": "number",
      "readOnly": true
    },
    "hasFailedChecks": {
      "type": "number",
      "readOnly": true
    },
    "lastMsgToClientTime": {
      "type": "date",
      "readOnly": true
    },
    "lastMsgFromClientTime": {
      "type": "date",
      "readOnly": true
    }
  },
  "viewCols": [
    "status",
    "applicantName",
    "requestFor",
    "assignedToTeam",
    "dateStarted",
    "dateModified",
    "dateCompleted",
    "hasFailedChecks",
    "numberOfChecksFailed",
    "lastMsgFromClientTime",
    "lastMsgToClientTime",
    "archived",
    "forms",
    "checks",
    "verifications",
    "editRequests",
    "products",
    "requestErrors"
  ],
  "required": [
    "applicant",
    "requestFor",
    "context"
  ],
  "indexes": [
    {
      "hashKey": "context",
      "specificity": 5
    },
    {
      "hashKey": "applicant._permalink",
      "rangeKey": "_time",
      "specificity": 4
    },
    {
      "hashKey": "_t",
      "rangeKey": "_time",
      "specificity": 1
    },
    {
      "hashKey": "status",
      "rangeKey": ["requestFor", "_time"],
      "specificity": 3
    }
  ]
}
